import{at as T,u as y,r as O,o as l,e as i,a,av as c,ax as d,F as f,aw as p,aE as g,f as L,au as B}from"./_plugin-vue_export-helper-d298c33c.js";import"./index-01d1d77d.js";/* empty css              */import"./index-59195d65.js";/* empty css              *//* empty css              *//* empty css              */import{s as N}from"./SimpleHeader-677300a3.js";import{t as w,g as I}from"./order-b9a80aa8.js";import{T as R,a as S}from"./index-7f09f902.js";import{C as U}from"./index-46893d50.js";import{L as $,P as D}from"./index-80addbda.js";import"./use-id-7060907e.js";import"./index-ef272f2f.js";const E={class:"order-box"},F={class:"content"},q=["onClick"],H={class:"order-item-header"},M={__name:"Order",setup(j){const _=y(),e=O({status:"",loading:!1,finished:!1,refreshing:!1,list:[],page:1,totalPage:0}),h=async()=>{const{data:s,data:{list:o}}=await I({pageNumber:e.page,status:e.status});e.list=e.list.concat(o),e.totalPage=s.totalPage,e.loading=!1,e.page>=s.totalPage&&(e.finished=!0)},v=({name:s})=>{e.status=s,u()},b=s=>{_.push({path:"/order-detail",query:{id:s}})},m=()=>{!e.refreshing&&e.page<e.totalPage&&(console.log(e.page),console.log(e.totalPage),e.page=e.page+1),e.refreshing&&(e.list=[],e.refreshing=!1),h()},u=()=>{e.refreshing=!0,e.finished=!1,e.loading=!0,e.page=1,m()};return(s,o)=>{const r=R,k=S,x=U,C=$,P=D;return l(),i("div",E,[a(N,{name:"我的订单",back:"/user"}),a(k,{onClickTab:v,color:"#1baeae","title-active-color":"#1baeae",class:"order-tab",modelValue:e.status,"onUpdate:modelValue":o[0]||(o[0]=t=>e.status=t)},{default:c(()=>[a(r,{title:"全部",name:""}),a(r,{title:"待付款",name:"0"}),a(r,{title:"待确认",name:"1"}),a(r,{title:"待发货",name:"2"}),a(r,{title:"已发货",name:"3"}),a(r,{title:"交易完成",name:"4"})]),_:1},8,["modelValue"]),d("div",F,[a(P,{modelValue:e.refreshing,"onUpdate:modelValue":o[2]||(o[2]=t=>e.refreshing=t),onRefresh:u,class:"order-list-refresh"},{default:c(()=>[a(C,{loading:e.loading,"onUpdate:loading":o[1]||(o[1]=t=>e.loading=t),finished:e.finished,"finished-text":"没有更多了",onLoad:m,onOffset:t=>10},{default:c(()=>[(l(!0),i(f,null,p(e.list,(t,V)=>(l(),i("div",{key:V,class:"order-item-box",onClick:n=>b(t.orderNo)},[d("div",H,[d("span",null,"订单时间："+g(L(w)(t.createTime)),1),d("span",null,g(t.orderStatusString),1)]),(l(!0),i(f,null,p(t.newBeeMallOrderItemVOS,n=>(l(),B(x,{key:n.orderId,num:n.goodsCount,price:n.sellingPrice,desc:"全场包邮",title:n.goodsName,thumb:s.$filters.prefix(n.goodsCoverImg)},null,8,["num","price","title","thumb"]))),128))],8,q))),128))]),_:1},8,["loading","finished"])]),_:1},8,["modelValue"])])])}}},oe=T(M,[["__scopeId","data-v-faa9017b"]]);export{oe as default};
