import{T as j}from"./index-d6c23353.js";import{I as O}from"./index-7f6e4180.js";import{c as E,d as _,G as I,I as A,T as F,X as T,Z as S,K as R,$ as U,a2 as V,ae as Y,Q as $,a as i,Y as u,t as x,b as k,ad as G,aY as K,m as B,w as C,aC as M}from"./_plugin-vue_export-helper-d298c33c.js";const[Q,g]=E("image"),X={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:u,height:u,radius:u,lazyLoad:Boolean,iconSize:u,showError:x,errorIcon:k("photo-fail"),iconPrefix:String,showLoading:x,loadingIcon:k("photo"),crossorigin:String,referrerpolicy:String};var Z=_({name:Q,props:X,emits:["load","error"],setup(e,{emit:r,slots:s}){const l=I(!1),o=I(!0),c=I(),{$Lazyload:d}=A().proxy,z=F(()=>{const n={width:T(e.width),height:T(e.height)};return S(e.radius)&&(n.overflow="hidden",n.borderRadius=T(e.radius)),n});R(()=>e.src,()=>{l.value=!1,o.value=!0});const b=n=>{o.value&&(o.value=!1,r("load",n))},t=()=>{const n=new Event("load");Object.defineProperty(n,"target",{value:c.value,enumerable:!0}),b(n)},f=n=>{l.value=!0,o.value=!1,r("error",n)},v=(n,m,L)=>L?L():i(O,{name:n,size:e.iconSize,class:m,classPrefix:e.iconPrefix},null),y=()=>{if(o.value&&e.showLoading)return i("div",{class:g("loading")},[v(e.loadingIcon,g("loading-icon"),s.loading)]);if(l.value&&e.showError)return i("div",{class:g("error")},[v(e.errorIcon,g("error-icon"),s.error)])},P=()=>{if(l.value||!e.src)return;const n={alt:e.alt,class:g("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?G(i("img",B({ref:c},n),null),[[K("lazy"),e.src]]):i("img",B({ref:c,src:e.src,onLoad:b,onError:f},n),null)},h=({el:n})=>{const m=()=>{n===c.value&&o.value&&t()};c.value?m():$(m)},w=({el:n})=>{n===c.value&&!l.value&&f()};return d&&U&&(d.$on("loaded",h),d.$on("error",w),V(()=>{d.$off("loaded",h),d.$off("error",w)})),Y(()=>{$(()=>{var n;(n=c.value)!=null&&n.complete&&!e.lazyLoad&&t()})}),()=>{var n;return i("div",{class:g({round:e.round,block:e.block}),style:z.value},[P(),y(),(n=s.default)==null?void 0:n.call(s)])}}});const q=C(Z),[H,a]=E("card"),J={tag:String,num:u,desc:String,thumb:String,title:String,price:u,centered:Boolean,lazyLoad:Boolean,currency:k("Â¥"),thumbLink:String,originPrice:u};var W=_({name:H,props:J,emits:["clickThumb"],setup(e,{slots:r,emit:s}){const l=()=>{if(r.title)return r.title();if(e.title)return i("div",{class:[a("title"),"van-multi-ellipsis--l2"]},[e.title])},o=()=>{if(r.tag||e.tag)return i("div",{class:a("tag")},[r.tag?r.tag():i(j,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},c=()=>r.thumb?r.thumb():i(q,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),d=()=>{if(r.thumb||e.thumb)return i("a",{href:e.thumbLink,class:a("thumb"),onClick:t=>s("clickThumb",t)},[c(),o()])},z=()=>{if(r.desc)return r.desc();if(e.desc)return i("div",{class:[a("desc"),"van-ellipsis"]},[e.desc])},b=()=>{const t=e.price.toString().split(".");return i("div",null,[i("span",{class:a("price-currency")},[e.currency]),i("span",{class:a("price-integer")},[t[0]]),M("."),i("span",{class:a("price-decimal")},[t[1]])])};return()=>{var t,f,v;const y=r.num||S(e.num),P=r.price||S(e.price),h=r["origin-price"]||S(e.originPrice),w=y||P||h||r.bottom,n=P&&i("div",{class:a("price")},[r.price?r.price():b()]),m=h&&i("div",{class:a("origin-price")},[r["origin-price"]?r["origin-price"]():`${e.currency} ${e.originPrice}`]),L=y&&i("div",{class:a("num")},[r.num?r.num():`x${e.num}`]),N=r.footer&&i("div",{class:a("footer")},[r.footer()]),D=w&&i("div",{class:a("bottom")},[(t=r["price-top"])==null?void 0:t.call(r),n,m,L,(f=r.bottom)==null?void 0:f.call(r)]);return i("div",{class:a()},[i("div",{class:a("header")},[d(),i("div",{class:a("content",{centered:e.centered})},[i("div",null,[l(),z(),(v=r.tags)==null?void 0:v.call(r)]),D])]),N])}}});const ne=C(W);export{ne as C};
